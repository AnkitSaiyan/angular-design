<div class="dfm-table-wrapper" #tableWrapper infiniteScroll (scrolled)="scrolled.emit()" [scrollWindow]="false">
  <table
    class="dfm-table w-100"
    [class.first-frozen]="isHorizontalScrollDisplayed"
    [class.compact-header]="compactHeader"
    (resized)="checkTableSize($event)"
  >
    <thead class="header">
      <tr>
        <dfm-table-header-cell *ngIf="selectable" class="checkbox-cell" [class.checkbox-first-frozen]="isHorizontalScrollDisplayed">
          <dfm-checkbox class="d-flex dfm-me-2" [ngModel]="areAllSelected" (click)="selectAllItems()" [disabled]="!items.length"></dfm-checkbox>
        </dfm-table-header-cell>
        <ng-content *ngTemplateOutlet="headerRowTemplate"></ng-content>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of items" class="body-row" (click)="click(item)" [class.pointer]="rowClickable">
        <dfm-table-body-cell [propagateClick]="false" *ngIf="selectable" class="checkbox-cell" [class.checkbox-first-frozen]="isHorizontalScrollDisplayed">
          <dfm-checkbox class="d-flex dfm-me-2" [ngModel]="selectedItems[item.id]" (ngModelChange)="selectItem($event, item.id)"></dfm-checkbox>
        </dfm-table-body-cell>
        <ng-container *ngTemplateOutlet="bodyRowTemplate; context: { $implicit: item }"></ng-container>
      </tr>
    </tbody>
  </table>
</div>
