<table [class.last-frozen]="stickyActions && isHorizontalScrollDisplayed"
    [class.first-frozen]="stickyFirstRow && isHorizontalScrollDisplayed" (resized)="checkTableSize($event)">
    <thead *ngIf="headers && headers.length > 0" [ngClass]="{'dfm-sticky-header': stickyHeader}">
        <tr>
            <ng-container *ngFor="let header of headers">
                <dfm-data-table-header-cell (click)="sortClicked(header.title)" [header]="header"
                    [headerSize]="headerSize"></dfm-data-table-header-cell>
            </ng-container>
            <ng-container *ngIf="showActions && actions && actions.length > 0">
                <dfm-data-table-header-cell [header]="actionsHeader"
                    [headerSize]="headerSize"></dfm-data-table-header-cell>
            </ng-container>
        </tr>
    </thead>

    <tbody>
        <ng-container *ngIf="data && data.items && data.items.length > 0">
            <tr *ngFor="let item of data.items" class="body-row" (click)="click(item)" [class.pointer]="rowClickable">
                <ng-container *ngTemplateOutlet="bodyRowTemplate; context: { $implicit: item }"></ng-container>

                <ng-container *ngIf="showActions && actions && actions.length > 0">
                    <dfm-table-row-cell [maxWidthStyle]="'120px'" [propagateClick]="false">
                        <ng-container *ngIf="(!stickyActions || !isHorizontalScrollDisplayed) && actions.length < 4">
                            <div class="d-flex dfm-gap-6">
                                <ng-container *ngFor="let action of actions">
                                    <div class="icon-20 pointer table-actions">
                                        <dfm-icon [name]="action.icon" (click)="actionClicked.emit(action)"></dfm-icon>
                                    </div>
                                </ng-container>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="(stickyActions && isHorizontalScrollDisplayed) || actions.length >= 4">
                            <div class="dropdown">
                                <dfm-button-icon size="sm" data-bs-toggle="dropdown" aria-expanded="false" color="tertiary-gray"
                                    icon="dots-vertical"></dfm-button-icon>
                                <ul class="dropdown-menu">
                                    <li class="pointer" *ngFor="let action of actions"
                                        (click)="actionClicked.emit(action)">
                                        <div class="option-selected"><dfm-icon [name]="action.icon"></dfm-icon></div>
                                        {{ action.label }}
                                    </li>
                                </ul>
                            </div>
                        </ng-container>
                    </dfm-table-row-cell>
                </ng-container>
            </tr>
        </ng-container>
    </tbody>
</table>